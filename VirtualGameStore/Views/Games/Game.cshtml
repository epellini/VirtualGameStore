@model GameDetailsViewModel

@{
    ViewData["Title"] = Model.Name;
}
@section scripts {
    <script src="~/js/site.js"></script>
}

<div class="row justify-content-center">
    <div class="col-lg-8 col-xl-6 col-12">
        <div class="card shadow bg-night text-snow-bright my-4">
            <div class="row m-0 ratio ratio-21x9">
                @{
                    Picture? picture = null;
                }
                @if (Model.Pictures != null)
                {
                    picture = Model.Pictures.Where(p => p.IsCoverArt == true).FirstOrDefault();
                }
                @if (picture != null)
                {
                    <img src="/images/@picture.PictureId" class="card-img-top p-0" alt="@picture.AltText" style="object-fit: cover">
                }
                else
                {
                    <img src="~/images/no-image.png" class="card-img-top p-0" alt="@Model.Name cover image" style="object-fit: cover">
                }
            </div>
            <div class="row text-start p-2 m-0 bg-shade">
                <h4 class="card-title text-uppercase fw-bold">@Model.Name</h4>
            </div>
            <div class="card-body bg-night">
                <div class="row justify-content-start">
                    <div class="mb-4">
                        <p>Developer: <b>@Model.Developer</b></p>
                        <p>Release Date: <b>@Model.ReleaseDate.Value.ToString("d")</b></p>
                        <p>Description: <b>@Model.Description</b></p>

                        <div class="row">
                            @if (Model.RetailPrice == null || Model.RetailPrice <= 0.0)
                            {
                                <p>Price: <b>Free to Play</b></p>
                            }
                            else
                            {
                                <p>Price: <b>$@Model.RetailPrice CAD</b></p>
                            }
                        </div>

                        <div class="row">
                            <p class="col-auto pe-1">Platform(s):</p>
                            @for (int i = 0; i < Model.Platforms.Count(); i++)
                            {
                                string punct = i + 1 < Model.Platforms.Count() ? "," : "";

                                <p class="fw-bold col-auto px-1">@Model.Platforms[i].PlatformName@punct</p>
                            }
                        </div>
                        <div class="row">
                            <p class="col-auto pe-1">Genre(s):</p>
                            @for (int i = 0; i < Model.Genres.Count(); i++)
                            {
                                string punct = i + 1 < Model.Genres.Count() ? "," : "";

                                <p class="fw-bold col-auto px-1">@Model.Genres[i].GenreName@punct</p>
                            }
                        </div>
                        <div class="row">
                            <p class="col-auto pe-1">Language(s):</p>
                            @for (int i = 0; i < Model.Languages.Count(); i++)
                            {
                                string punct = i + 1 < Model.Languages.Count() ? "," : "";

                                <p class="fw-bold col-auto px-1">@Model.Languages[i].LanguageName@punct</p>
                            }
                        </div>
                    </div>
                </div>
                <div class="row justify-content-between p-2 m-0">
                    <div class="col-6 px-1">
                        @if (Model.Wishlist != null && Model.Wishlist.Where(w => w.Game.GameId == Model.GameId).FirstOrDefault() != null)
                        {
                            <a role="button" onclick="addGameToWishlist(@Model.GameId)" id="WishlistBtn" class="col-12 btn btn-aurora-red-outline">Remove from Wishlist</a>
                        }
                        else
                        {
                            <a role="button" onclick="addGameToWishlist(@Model.GameId)" id="WishlistBtn" class="col-12 btn btn-frost-outline">Add to Wishlist</a>
                        }
                    </div>
                    <div class="col-6 px-1">
                        <a href="#" class="col-12 btn btn-frost-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="20" fill="none" stroke="#2E3440" viewBox="0 0 24 28">
                                <path d="M6.29977 5H21L19 12H7.37671M20 16H8L6 3H3M9 20C9 20.5523 8.55228 21 8 21C7.44772 21 7 20.5523 7 20C7 19.4477 7.44772 19 8 19C8.55228 19 9 19.4477 9 20ZM20 20C20 20.5523 19.5523 21 19 21C18.4477 21 18 20.5523 18 20C18 19.4477 18.4477 19 19 19C19.5523 19 20 19.4477 20 20Z" stroke="#2E3440" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            Add to Cart
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



